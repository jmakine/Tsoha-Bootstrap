{% extends "base.html" %}
{% block content %}

{% if tervehdys %}

<div class="alert alert-success">
    {{tervehdys}}
</div>

{% endif %}


{% if message %}

<div class="alert alert-info">
    {{message}}
</div>

{% endif %}

<h1>Tehtävälista</h1>

<p>
    <a href="{{base_path}}/tehtavat/lisaa" class="btn btn-success">Lisää tehtävä</a>
</p>

<!--
<h4>Näytä vain:</h4>
<p> <select name="Luokka" multiple="multiple">
        <option value="high">Korkea</option>
        <option value="medium">Keskitaso</option>
        <option value="matala">Matala</option>
    </select>
</p>
-->

<table id="myTable" class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Nimi</th>
            <th>Tärkeys
            <th>Määräpäivä</th>
            <th>Lisätty</th>
            <th>Luokka</th> 
            <th></th>
            <th></th>
        </tr>
    </thead>

    <tbody>
        
        {% for tehtava in tehtavalista %}
        <tr>
            <td><a href="{{base_path}}/tehtavat/{{tehtava.tehtava_id}}">{{tehtava.tehtava_nimi}}</a></td>           
            <td>{% if tehtava.tarkeys == 'korkea' %}<a style="background-color: red; color: white; font-weight: bold; display: inline-block">{{tehtava.tarkeys}}</a>
                {% elseif tehtava.tarkeys == 'matala' %}<a style="background-color: green; color: white; font-weight: bold; display: inline-block">{{tehtava.tarkeys}}</a>
                {% elseif tehtava.tarkeys == 'neutraali' %}<a style="background-color: yellow; color: white; font-weight: bold; display: inline-block">{{tehtava.tarkeys}}</a>
                {% else %}<label>{{tehtava.tarkeys}}</label></td>
                {% endif %}
            <td>{{tehtava.deadline}}</td>         
            <td>{{tehtava.luotupvm}}</td>
            <td><a href="{{base_path}}/luokat/{{tehtava.luokka_id}}">{{tehtava.luokka_nimi}}</a></td> <!-- miten saa nimen-->
            <th><a class="btn btn-default btn-sm" href="{{base_path}}/tehtavat/{{tehtava.tehtava_id}}/muokkaa">Muokkaa</a></th>
            <th>
                <form method="post" action="{{base_path}}/tehtavat/{{tehtava.tehtava_id}}/poista" style="display: inline-block;">
                <button type="submit" class="btn btn-danger">Poista</button>
                </form>
            </th>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}